\chapter{実験結果と考察}
本章では，提案手法であるスケーリングを用いた試薬合成中におけるフラッシング回数の削減の実験の結果と，その考察を示す．

\section{評価方法}
提案手法における，スケーリングを用いた入力混合木の変形操作の評価を行うため，変形操作を行なった混合木と変形操作を行わなかった混合木
のそれぞれを入力として，PMD上における液滴の混合手順の生成を行う．
その後，それぞれの混合木を入力として生成された混合手順における，フラッシング回数を比較することで，
スケーリングを用いた入力混合木の変形操作のフラッシング回数の削減率を求める．
フラッシング回数の削減率を基に，混合木の変形操作の有効性を測る．

具体的な評価方法を述べる．
まず，高さ3，4，5の混合木を，300個ずつランダムに生成する．
次に，生成した全ての混合木を入力とし，PMD上における液滴の混合手順の生成を行う．
その後，生成した全ての混合木に対して，スケーリングを用いた変形操作を行う．
そして，変形操作を行った混合木を入力として，PMD上における液滴の混合手順の生成を行う．
変形操作なしの混合木と変形操作を行なった混合木の両方から生成される混合手順から，混合木の変形によるフラッシング回数の削減率を求める．
最後に，入力混合木の高さごとのフラッシング回数の削減率の平均を求める．
フラッシング回数の削減率の平均の値を基に，試薬合成中におけるフラッシング回数の削減手法としての，提案手法の有効性を測る．

また，実験では既存手法である，平井らの手法を用いたPMD上における液滴の混合手順の生成も行った．
平井らの手法を用いた実験と提案手法における実験では，同じ入力混合木を使用した．
実験結果を比較することで，それぞれの手法の試薬合成中におけるフラッシング回数の削減手法としての有効性を測る．

\section{実験結果}
表~\ref{table:result}に，提案手法の実験結果を示す．
また，表~\ref{table:ExistingResult}に，既存手法である平井らの手法の実験結果を示す．
表~\ref{table:result}における変形とは，スケーリングを用いた入力混合木の変形を指す．
表~\ref{table:ExistingResult}における並び替えとは，配置優先度を用いたミキサーの配置の決定順序の並び替えを指す．

%卒論の手法と提案手法での試薬合成中のフラッシング回数，使用セル数を比較し，表にまとめる．
%縮小版
\begin{table}[tbp]
\centering
\caption{提案手法の実験結果（小数点3桁まで）}
    \scalebox{0.65}{
\begin{tabular}{l|r|r|r|r|r|r|r} \Hline 
    \multicolumn{1}{l|}{\multirow{2}{*}{\begin{tabular}{c}混合木の\\高さ\end{tabular}}}& \multicolumn{1}{l|}{\multirow{2}{*}{ミキサー数}} &\multicolumn{2}{c|}{\begin{tabular}{c}オーバーラップを発生させる\\ミキサーの配置を行った回数\end{tabular}} &\multicolumn{1}{l|}{\multirow{2}{*}{\begin{tabular}{c}オーバーラップを発生させるミキサーの\\配置を行った回数の削減率の平均（$\%$）\end{tabular}}}&  \multicolumn{2}{l|}{フラッシング回数} & \multicolumn{1}{l}{\multirow{2}{*}{\begin{tabular}{c}フラッシング回数の\\削減率の平均（$\%$）\end{tabular}}} \\\cline{3-4}\cline{6-7}
        &&変形前&変形後&&変形前&変形後&\\\hline\hline 
        3&3.097&0.277&0.003&27.436&0.3&0.003&27.436\\\hline 
        4&6.663&1.063&0.27&53.638&1.095&0.238&59.392\\\hline 
        5&11.449&2.449&0.493&75.323&2.406&0.449&76.914\\\hline 
\end{tabular}}
\label{table:result}
\end{table}

%縮小版
\begin{table}[tbp]
\centering
\caption{平井らの手法の実験結果（小数点3桁まで）}
    \scalebox{0.63}{
\begin{tabular}{l|r|r|r|r|r|r|r} \Hline 
    \multicolumn{1}{l|}{\multirow{2}{*}{\begin{tabular}{c}混合木の\\高さ\end{tabular}}}& \multicolumn{1}{l|}{\multirow{2}{*}{ミキサー数}} &\multicolumn{2}{c|}{\begin{tabular}{c}オーバーラップを発生させる\\ミキサーの配置を行った回数\end{tabular}} &\multicolumn{1}{l|}{\multirow{2}{*}{\begin{tabular}{c}オーバーラップを発生させるミキサーの\\配置を行った回数の削減率の平均（$\%$）\end{tabular}}}&  \multicolumn{2}{l|}{フラッシング回数} & \multicolumn{1}{l}{\multirow{2}{*}{\begin{tabular}{c}フラッシング回数の\\削減率の平均（$\%$）\end{tabular}}} \\\cline{3-4}\cline{6-7}
        &&並び替え前&並び替え後&&並び替え前&並び替え後&\\\hline\hline 
        3&3.097&0.313&0.313&0&0.313&0.313&0\\\hline 
        4&6.663&1.901&1.897&0.066&1.623&1.583&0.959\\\hline 
        5&11.449&4.522&4.493&0.419&4.601&4.471&2.712\\\hline 
\end{tabular}}
\label{table:ExistingResult}
\end{table}

ミキサー数の列は，各高さの混合木に対応した試薬合成中に混合されるミキサー数の平均を示す．
同じ混合木を入力としたので，表~\ref{table:result}，表~\ref{table:ExistingResult}においてミキサー数の値は同じである．
オーバーラップを発生させるミキサーの配置を行った回数の列は，液滴の混合手順において提供比率に含まれる混合ノードのミキサー同士でオーバーラップが発生する配置を行なった回数の平均を示す．
表~\ref{table:result}，表~\ref{table:ExistingResult}では，平井らの手法における高さ3の混合木以外，変形後，並び替え後に値が減っている．
オーバーラップを発生させるミキサーの配置を行った回数の削減率の平均の列は，変形や並び替えによるオーバーラップを発生させるミキサーの配置を行った回数の削減率の平均を示す．
表~\ref{table:result}，表~\ref{table:ExistingResult}では，平井らの手法における高さ3の混合木以外，削減率の平均は正の値を取っている．
これは，提案手法と平井らの手法のどちらにおいても，オーバーラップを発生させるミキサーの配置を行った回数が削減されていることを示す．
また，混合木の高さが大きくなるほど，削減率の平均は高くなっている．
フラッシング回数の列は，液滴の混合手順において行なわれるフラッシング回数の平均を示す．
表~\ref{table:result}，表~\ref{table:ExistingResult}では，平井らの手法における高さ3の混合木以外，変形後，並び替え後に値が減っている．
フラッシング回数の削減率の平均の列は，変形や並び替えによるフラッシング回数の削減率の平均を示す．
表~\ref{table:result}，表~\ref{table:ExistingResult}では，平井らの手法における高さ3の混合木以外，削減率の平均は正の値を取っている．
また，混合木の高さが大きくなるほど，削減率の平均は高くなっている．

変形や並び替え前のフラッシング等の値を$before$,変形や並び替え後のフラッシング等の値を$after$とすると，各種の削減率$ReductionRate$の値は式\ref{equ:ReductionRate}で計算される．
\begin{equation}
    ReductionRate = 
        \begin{cases}
            (1-(after/before))*100 & (before > after)\\
            ((before/after)-1)*100 & (before < after)\\
            0 & (before = after)
        \end{cases}
    \label{equ:ReductionRate}
\end{equation}

図~\ref{fig:FlushingReductionRate}に，それぞれの手法における入力混合木の高さと，フラッシング回数の削減率の関係をグラフで示す．
図~\ref{fig:FlushingReductionRate}から，提案手法と平井らの手法のどちらにおいても，混合木の高さが大きくなるほど，フラッシング回数の削減率が高くなることが分かる．

\begin{figure}[tbp]
 \centering\includegraphics[scale=0.7]{img/FlushingReductionRate.pdf}

 \caption{提案手法と平井らの手法の入力における，フラッシング回数の削減率}\label{fig:FlushingReductionRate}
\end{figure}

\section{考察}
いい結果が出て欲しい
